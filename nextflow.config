process {
    executor = 'slurm'
    queue = 'aussrc_cluster'
}

params {
    SCRIPTS_CONTAINER = 'astroaustin/wallaby_scripts:v0.1.2'

    CASDA_CUBE_TYPE = 'cube'
    CASDA_CUBE_FILENAME = 'image.restored.%SB$SBID%.cube.MilkyWay.contsub.fits'
    CASDA_WEIGHTS_TYPE = 'cube'
    CASDA_WEIGHTS_FILENAME = 'weights%SB$SBID%.cube.MilkyWay.fits'
    CASDA_QUERY = 'SELECT * FROM ivoa.obscore where obs_collection like %WALLABY% and filename like $FILENAME and dataproduct_type = $TYPE'
    
    LINMOS_OUTPUT_IMAGE_CUBE = 'mosaicked'
    LINMOS_CONFIG_FILENAME = 'linmos.config'
    LINMOS_CLUSTER_OPTIONS = '--ntasks=324 --ntasks-per-node=18'
}

containerOptions = '--bind /mnt/shared:/mnt/shared'

singularity.autoMounts = true
singularity.enabled = true